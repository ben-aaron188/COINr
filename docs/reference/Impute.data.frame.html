<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Impute a data frame — Impute.data.frame • COINr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Impute a data frame — Impute.data.frame"><meta property="og:description" content="Impute a data frame using any function, either column-wise, row-wise or by the whole data frame in one
shot."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">COINr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/adjustments.html">Adjustments and Comparisons</a>
    </li>
    <li>
      <a href="../articles/aggregate.html">Aggregation</a>
    </li>
    <li>
      <a href="../articles/analysis.html">Analysis</a>
    </li>
    <li>
      <a href="../articles/coins.html">Building coins</a>
    </li>
    <li>
      <a href="../articles/data_selection.html">Data selection</a>
    </li>
    <li>
      <a href="../articles/denomination.html">Denomination</a>
    </li>
    <li>
      <a href="../articles/imputation.html">Imputation</a>
    </li>
    <li>
      <a href="../articles/normalise.html">Normalisation</a>
    </li>
    <li>
      <a href="../articles/other_functions.html">Other Functions</a>
    </li>
    <li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/panel_data.html">Panel Data</a>
    </li>
    <li>
      <a href="../articles/results.html">Presenting Results</a>
    </li>
    <li>
      <a href="../articles/screening.html">Unit Screening</a>
    </li>
    <li>
      <a href="../articles/sensitivity.html">Sensitivity Analysis</a>
    </li>
    <li>
      <a href="../articles/treat.html">Outlier Treatment</a>
    </li>
    <li>
      <a href="../articles/v1.html">Changes from COINr v1.0.0</a>
    </li>
    <li>
      <a href="../articles/visualisation.html">Visualisation</a>
    </li>
    <li>
      <a href="../articles/weights.html">Weights</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bluefoxr/COINr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Impute a data frame</h1>
    <small class="dont-index">Source: <a href="https://github.com/bluefoxr/COINr/blob/HEAD/R/impute.R" class="external-link"><code>R/impute.R</code></a></small>
    <div class="hidden name"><code>Impute.data.frame.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Impute a data frame using any function, either column-wise, row-wise or by the whole data frame in one
shot.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S3 method for data.frame</span>
<span class="fu"><a href="Impute.html">Impute</a></span><span class="op">(</span>
  <span class="va">x</span>,
  f_i <span class="op">=</span> <span class="cn">NULL</span>,
  f_i_para <span class="op">=</span> <span class="cn">NULL</span>,
  impute_by <span class="op">=</span> <span class="st">"column"</span>,
  normalise_first <span class="op">=</span> <span class="cn">NULL</span>,
  directions <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A data frame with only numeric columns.</p></dd>


<dt>f_i</dt>
<dd><p>A function to use for imputation. By default, imputation is performed by simply substituting
the mean of non-<code>NA</code> values for each column at a time.</p></dd>


<dt>f_i_para</dt>
<dd><p>Any additional parameters to pass to <code>f_i</code>, apart from <code>x</code></p></dd>


<dt>impute_by</dt>
<dd><p>Specifies how to impute: if <code>"column"</code>, passes each column separately as a numerical
vector to <code>f_i</code>; if <code>"row"</code>, passes each <em>row</em> separately; and if <code>"df"</code> passes the entire data frame to
<code>f_i</code>. The function called by <code>f_i</code> should be compatible with the type of data passed to it.</p></dd>


<dt>normalise_first</dt>
<dd><p>Logical: if <code>TRUE</code>, each column is normalised using a min-max operation before
imputation. By default this is <code>FALSE</code> unless <code>impute_by = "row"</code>. See details.</p></dd>


<dt>directions</dt>
<dd><p>A vector of directions: either -1 or 1 to indicate the direction of each column
of <code>x</code> - this is only used if <code>normalise_first = TRUE</code>. See details.</p></dd>


<dt>...</dt>
<dd><p>arguments passed to or from other methods.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An imputed data frame</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function only accepts data frames with all numeric columns. It imputes any <code>NA</code>s in the data frame
by invoking the function <code>f_i</code> and any optional arguments <code>f_i_para</code> on each column at a time (if
<code>impute_by = "column"</code>), or on each row at a time (if <code>impute_by = "row"</code>), or by passing the entire
data frame to <code>f_i</code> if <code>impute_by = "df"</code>.</p>
<p>Clearly, the function <code>f_i</code> needs to be able to accept with the data class passed to it - if
<code>impute_by</code> is <code>"row"</code> or <code>"column"</code> this will be a numeric vector, or if <code>"df"</code> it will be a data
frame. Moreover, this function should return a vector or data frame identical to the vector/data frame passed to
it except for <code>NA</code> values, which can be replaced. The function <code>f_i</code> is not required to replace <em>all</em> <code>NA</code>
values.</p>
<p>When imputing row-wise, prior normalisation of the data is recommended. This is because imputation
will use e.g. the mean of the unit values over all indicators (columns). If the indicators are on
very different scales, the result will likely make no sense. If the indicators are normalised first,
more sensible results can be obtained. There are two options to pre-normalise: first is by setting
<code>normalise_first = TRUE</code> - this is anyway the default if <code>impute_by = "row"</code>. In this case, you also
need to supply a vector of directions. The data will then be normalised using a min-max approach
before imputation, followed by the inverse operation to return the data to the original scales.</p>
<p>Another approach which gives more control is to simply run <code><a href="Normalise.html">Normalise()</a></code> first, and work with the
normalised data from that point onwards. In that case it is better to set <code>normalise_first = FALSE</code>,
since by default if <code>impute_by = "row"</code> it will be set to <code>TRUE</code>.</p>
<p>Checks are made on the format of the data returned by imputation functions, to ensure the
type and that non-<code>NA</code> values have not been inadvertently altered. This latter check is allowed
a degree of tolerance for numerical precision, controlled by the <code>sfigs</code> argument. This is because
if the data frame is normalised, and/or depending on the imputation function, there may be a very
small differences. By default <code>sfigs = 9</code>, meaning that the non-<code>NA</code> values pre and post-imputation
are compared to 9 significant figures.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># a df of random numbers</span></span>
<span class="r-in"><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">50</span><span class="op">)</span>, <span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># introduce NAs (2 in 3 of 5 cols)</span></span>
<span class="r-in"><span class="va">X</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span class="r-in"><span class="va">X</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span class="r-in"><span class="va">X</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># impute using column mean</span></span>
<span class="r-in"><span class="fu"><a href="Impute.html">Impute</a></span><span class="op">(</span><span class="va">X</span>, f_i <span class="op">=</span> <span class="st">"i_mean"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           V1         V2        V3        V4        V5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.1497639 0.52562715 0.4087492 0.7811421 0.6241937</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.1511259 0.97964470 0.3694333 0.6596783 0.9998536</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.4819219 0.98923273 0.7469984 0.2349049 0.7604280</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.6677410 0.52659494 0.4734876 0.2457475 0.1203534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.6695454 0.09680426 0.1229599 0.6946503 0.6295385</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.4819219 0.56856717 0.7196786 0.2436740 0.6295385</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  0.1899729 0.14015188 0.8602717 0.5614376 0.9552747</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  0.4772996 0.59003401 0.2409119 0.7965775 0.3987586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  0.7766469 0.93166719 0.4734876 0.6214333 0.1943477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.7732800 0.19964817 0.3188979 0.4702918 0.9830982</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># impute using row median (no normalisation)</span></span>
<span class="r-in"><span class="fu"><a href="Impute.html">Impute</a></span><span class="op">(</span><span class="va">X</span>, f_i <span class="op">=</span> <span class="st">"i_median"</span>, impute_by <span class="op">=</span> <span class="st">"row"</span>,</span>
<span class="r-in">       normalise_first <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           V1         V2        V3        V4        V5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.1497639 0.52562715 0.4087492 0.7811421 0.6241937</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.1511259 0.97964470 0.3694333 0.6596783 0.9998536</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.7537132 0.98923273 0.7469984 0.2349049 0.7604280</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.6677410 0.52659494 0.3861712 0.2457475 0.1203534</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.6695454 0.09680426 0.1229599 0.6946503 0.3962526</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.5685672 0.56856717 0.7196786 0.2436740 0.5685672</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  0.1899729 0.14015188 0.8602717 0.5614376 0.9552747</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  0.4772996 0.59003401 0.2409119 0.7965775 0.3987586</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  0.7766469 0.93166719 0.6990401 0.6214333 0.1943477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.7732800 0.19964817 0.3188979 0.4702918 0.9830982</span>
<span class="r-in"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by William Becker.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

