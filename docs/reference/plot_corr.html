<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Static heatmaps of correlation matrices — plot_corr • COINr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Static heatmaps of correlation matrices — plot_corr"><meta property="og:description" content="Generates heatmaps of correlation matrices using ggplot2, which can be tailored according to the grouping and structure
of the index. This enables correlating any set of indicators against any other,
and supports calling named aggregation groups of indicators. The withparent argument generates tables of correlations only with
parents of each indicator. Also supports discrete colour maps using flagcolours, different types of correlation, and groups
plots by higher aggregation levels."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">COINr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/adjustments.html">Adjustments and Comparisons</a>
    </li>
    <li>
      <a href="../articles/aggregate.html">Aggregation</a>
    </li>
    <li>
      <a href="../articles/analysis.html">Analysis</a>
    </li>
    <li>
      <a href="../articles/coins.html">Building coins</a>
    </li>
    <li>
      <a href="../articles/data_selection.html">Data selection</a>
    </li>
    <li>
      <a href="../articles/denomination.html">Denomination</a>
    </li>
    <li>
      <a href="../articles/imputation.html">Imputation</a>
    </li>
    <li>
      <a href="../articles/normalise.html">Normalisation</a>
    </li>
    <li>
      <a href="../articles/other_functions.html">Other Functions</a>
    </li>
    <li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/panel_data.html">Panel Data</a>
    </li>
    <li>
      <a href="../articles/results.html">Presenting Results</a>
    </li>
    <li>
      <a href="../articles/screening.html">Unit Screening</a>
    </li>
    <li>
      <a href="../articles/sensitivity.html">Sensitivity Analysis</a>
    </li>
    <li>
      <a href="../articles/treat.html">Outlier Treatment</a>
    </li>
    <li>
      <a href="../articles/v1.html">Changes from COINr v1.0.0</a>
    </li>
    <li>
      <a href="../articles/visualisation.html">Visualisation</a>
    </li>
    <li>
      <a href="../articles/weights.html">Weights</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bluefoxr/COINr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Static heatmaps of correlation matrices</h1>
    <small class="dont-index">Source: <a href="https://github.com/bluefoxr/COINr/blob/HEAD/R/plot_corr.R" class="external-link"><code>R/plot_corr.R</code></a></small>
    <div class="hidden name"><code>plot_corr.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generates heatmaps of correlation matrices using ggplot2, which can be tailored according to the grouping and structure
of the index. This enables correlating any set of indicators against any other,
and supports calling named aggregation groups of indicators. The <code>withparent</code> argument generates tables of correlations only with
parents of each indicator. Also supports discrete colour maps using <code>flagcolours</code>, different types of correlation, and groups
plots by higher aggregation levels.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">plot_corr</span><span class="op">(</span>
  <span class="va">coin</span>,
  <span class="va">dset</span>,
  iCodes <span class="op">=</span> <span class="cn">NULL</span>,
  Levels <span class="op">=</span> <span class="fl">1</span>,
  <span class="va">...</span>,
  cortype <span class="op">=</span> <span class="st">"pearson"</span>,
  withparent <span class="op">=</span> <span class="cn">FALSE</span>,
  grouplev <span class="op">=</span> <span class="cn">NULL</span>,
  box_level <span class="op">=</span> <span class="cn">NULL</span>,
  showvals <span class="op">=</span> <span class="cn">TRUE</span>,
  flagcolours <span class="op">=</span> <span class="cn">FALSE</span>,
  flagthresh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.4</span>, <span class="fl">0.3</span>, <span class="fl">0.9</span><span class="op">)</span>,
  pval <span class="op">=</span> <span class="fl">0.05</span>,
  insig_colour <span class="op">=</span> <span class="st">"#F0F0F0"</span>,
  text_colour <span class="op">=</span> <span class="cn">NULL</span>,
  discrete_colours <span class="op">=</span> <span class="cn">NULL</span>,
  box_colour <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>coin</dt>
<dd><p>The coin object</p></dd>


<dt>dset</dt>
<dd><p>The target data set.</p></dd>


<dt>iCodes</dt>
<dd><p>An optional list of character vectors where the first entry specifies the indicator/aggregate
codes to correlate against the second entry (also a specification of indicator/aggregate codes)</p></dd>


<dt>Levels</dt>
<dd><p>The aggregation levels to take the two groups of indicators from. See <code><a href="get_data.html">get_data()</a></code> for details.</p></dd>


<dt>...</dt>
<dd><p>Optional further arguments to pass to <code><a href="get_data.html">get_data()</a></code>.</p></dd>


<dt>cortype</dt>
<dd><p>The type of correlation to calculate, either <code>"pearson"</code>, <code>"spearman"</code>, or <code>"kendall"</code> (see <code><a href="https://rdrr.io/r/stats/cor.html" class="external-link">stats::cor()</a></code>).</p></dd>


<dt>withparent</dt>
<dd><p>If <code>aglev[1] != aglev[2]</code>, and equal <code>TRUE</code> will only plot correlations of each row with its parent.
If <code>"family"</code>, plots the lowest aggregation level in <code>Levels</code> against all its parent levels.
If <code>FALSE</code> plots the full correlation matrix (default).</p></dd>


<dt>grouplev</dt>
<dd><p>The aggregation level to group correlations by if <code>aglev[1] == aglev[2]</code>. By default, groups correlations into the
aggregation level above. Set to 0 to disable grouping and plot the full matrix.</p></dd>


<dt>box_level</dt>
<dd><p>The aggregation level to draw boxes around if <code>aglev[1] == aglev[2]</code>.</p></dd>


<dt>showvals</dt>
<dd><p>If <code>TRUE</code>, shows correlation values. If <code>FALSE</code>, no values shown.</p></dd>


<dt>flagcolours</dt>
<dd><p>If <code>TRUE</code>, uses discrete colour map with thresholds defined by <code>flagthresh</code>. If <code>FALSE</code> uses continuous colour map.</p></dd>


<dt>flagthresh</dt>
<dd><p>A 3-length vector of thresholds for highlighting correlations, if <code>flagcolours = TRUE</code>.
<code>flagthresh[1]</code> is the negative threshold. Below this value, values will be flagged red.
<code>flagthresh[2]</code> is the "weak" threshold. Values between <code>flagthresh[1]</code> and <code>flagthresh[2]</code> are coloured grey.
<code>flagthresh[3]</code> is the "high" threshold. Anything between <code>flagthresh[2]</code> and <code>flagthresh[3]</code> is flagged "OK",
and anything above <code>flagthresh[3]</code> is flagged "high".</p></dd>


<dt>pval</dt>
<dd><p>The significance level for plotting correlations. Correlations with \(p &lt; pval\) will be shown,
otherwise they will be plotted as the colour specified by <code>insig_colour</code>. Set to 0 to disable this.</p></dd>


<dt>insig_colour</dt>
<dd><p>The colour to plot insignificant correlations. Defaults to a light grey.</p></dd>


<dt>text_colour</dt>
<dd><p>The colour of the correlation value text (default white).</p></dd>


<dt>discrete_colours</dt>
<dd><p>An optional 4-length character vector of colour codes or names to define the discrete
colour map if <code>flagcolours = TRUE</code> (from high to low correlation categories). Defaults to a green/blue/grey/purple.</p></dd>


<dt>box_colour</dt>
<dd><p>The line colour of grouping boxes, default black.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A plot object generated with ggplot2, which can be edited further with ggplot2 commands.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function calls <code><a href="get_corr.html">get_corr()</a></code>.</p>
<p>Note that this function can only call correlations within the same data set (i.e. only one data set in <code>.$Data</code>).</p>
<p>This function uses ggplot2 to generate plots, so the plot can be further manipulated using ggplot2 commands.
See <code>vignette("visualisation</code>) for more details on plotting.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># build example coin</span></span>
<span class="r-in"><span class="va">coin</span> <span class="op">&lt;-</span> <span class="fu"><a href="build_example_coin.html">build_example_coin</a></span><span class="op">(</span>up_to <span class="op">=</span> <span class="st">"Normalise"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># plot correlations between indicators in Sust group, using Normalised dset</span></span>
<span class="r-in"><span class="fu">plot_corr</span><span class="op">(</span><span class="va">coin</span>, dset <span class="op">=</span> <span class="st">"Normalised"</span>, iCodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Sust"</span><span class="op">)</span>,</span>
<span class="r-in">          grouplev <span class="op">=</span> <span class="fl">2</span>, flagcolours <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-plt img"><img src="plot_corr-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by William Becker.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

