<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Compare two data frames — compare_df • COINr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Compare two data frames — compare_df"><meta property="og:description" content="A custom function for comparing two data frames of indicator data, to see whether they match up, at a specified number of
significant figures."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">COINr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/adjustments.html">Adjustments and Comparisons</a>
    </li>
    <li>
      <a href="../articles/aggregate.html">Aggregation</a>
    </li>
    <li>
      <a href="../articles/analysis.html">Analysis</a>
    </li>
    <li>
      <a href="../articles/coins.html">Building coins</a>
    </li>
    <li>
      <a href="../articles/data_selection.html">Data selection</a>
    </li>
    <li>
      <a href="../articles/denomination.html">Denomination</a>
    </li>
    <li>
      <a href="../articles/imputation.html">Imputation</a>
    </li>
    <li>
      <a href="../articles/normalise.html">Normalisation</a>
    </li>
    <li>
      <a href="../articles/other_functions.html">Other Functions</a>
    </li>
    <li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/panel_data.html">Panel Data</a>
    </li>
    <li>
      <a href="../articles/results.html">Presenting Results</a>
    </li>
    <li>
      <a href="../articles/screening.html">Unit Screening</a>
    </li>
    <li>
      <a href="../articles/sensitivity.html">Sensitivity Analysis</a>
    </li>
    <li>
      <a href="../articles/treat.html">Outlier Treatment</a>
    </li>
    <li>
      <a href="../articles/v1.html">Changes from COINr v1.0.0</a>
    </li>
    <li>
      <a href="../articles/visualisation.html">Visualisation</a>
    </li>
    <li>
      <a href="../articles/weights.html">Weights</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bluefoxr/COINr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compare two data frames</h1>
    <small class="dont-index">Source: <a href="https://github.com/bluefoxr/COINr/blob/HEAD/R/DFtools.R" class="external-link"><code>R/DFtools.R</code></a></small>
    <div class="hidden name"><code>compare_df.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A custom function for comparing two data frames of indicator data, to see whether they match up, at a specified number of
significant figures.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">compare_df</span><span class="op">(</span><span class="va">df1</span>, <span class="va">df2</span>, <span class="va">matchcol</span>, sigfigs <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>df1</dt>
<dd><p>A data frame</p></dd>


<dt>df2</dt>
<dd><p>Another data frame</p></dd>


<dt>matchcol</dt>
<dd><p>A common column name that is used to match row order. E.g. this might be <code>uCode</code>.</p></dd>


<dt>sigfigs</dt>
<dd><p>The number of significant figures to use for matching numerical columns</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with comparison results. List contains:</p><ul><li><p><code>.$Same</code>: overall summary: if <code>TRUE</code> the data frames are the same according to the rules specified, otherwise <code>FALSE</code>.</p></li>
<li><p><code>.$Details</code>: details of each column as a data frame. Each row summarises a column of the data frame, saying whether
the column is the same as its equivalent, and the number of differences, if any. In case the two data frames have differing
numbers of columns and rows, or have differing column names or entries in <code>matchcol</code>, <code>.$Details</code> will simply contain a
message to this effect.</p></li>
<li><p><code>.$Differences</code>: a list with one entry for every column which contains different entries. Differences are summarised as
a data frame with one row for each difference, reporting the value from <code>df1</code> and its equivalent from <code>df2</code>.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function compares numerical and non-numerical columns to see if they match. Rows and columns can be in any order. The function
performs the following checks:</p><ul><li><p>Checks that the two data frames are the same size</p></li>
<li><p>Checks that column names are the same, and that the matching column has the same entries</p></li>
<li><p>Checks column by column that the elements are the same, after sorting according to the matching column</p></li>
</ul><p>It then summarises for each column whether there are any differences, and also what the differences are, if any.</p>
<p>This is intended to cross-check results. For example, if you run something in COINr and want to check indicator results against
external calculations.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># take a sample of indicator data (including the uCode column)</span></span>
<span class="r-in"><span class="va">data1</span> <span class="op">&lt;-</span> <span class="va">ASEM_iData</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">12</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span><span class="op">]</span></span>
<span class="r-in"><span class="co"># copy the data</span></span>
<span class="r-in"><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">data1</span></span>
<span class="r-in"><span class="co"># make a change: replace one value in data2 by NA</span></span>
<span class="r-in"><span class="va">data2</span><span class="op">[</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span class="r-in"><span class="co"># compare data frames</span></span>
<span class="r-in"><span class="fu">compare_df</span><span class="op">(</span><span class="va">data1</span>, <span class="va">data2</span>, matchcol <span class="op">=</span> <span class="st">"uCode"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Same</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Details</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Column TheSame                          Comment NDifferent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   uCode    TRUE      Non-numerical and identical          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     LPI   FALSE Numerical and different at 5 sf.          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Flights    TRUE Numerical and identical to 5 sf.          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    Ship    TRUE Numerical and identical to 5 sf.          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    Bord    TRUE Numerical and identical to 5 sf.          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Differences</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Differences$LPI</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   uCode      df1 df2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   AUT 4.097985  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by William Becker.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

