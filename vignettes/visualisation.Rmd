---
title: "Visualisation"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Visualisation}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

COINr has a number of options for plotting and visualising indicator data, both for analysis and presentation. All plots generated by COINr are powered by ggplot2, which means that if you want to customise them beyond the arguments provided by COINr functions, you can simply edit them with ggplot2 commands.

Note that prior to COINr v1.0.0, COINr additionally included interactive visualisation using apps and HTML widgets. This has been discontinued but those functions can still be accessed via the COINrX package. See the [vignette](v1.html) on this topic for the reasons behind this and further details.


# Framework

Upon building a coin (see the [Building coins](coins.html) vignette), a good way to begin is to check the structure of the index. This can be done visually with the `plot_framework()` function, which generates a sunburst plot of the index structure.

```{r, message=F}
library(COINr)

# assemble example COIN
coin <- build_example_coin(up_to = "new_coin")

# plot framework
plot_framework(coin)
```

The sunburst plot is useful for a few things. First, it shows the structure that COINr has understood. This allows you to check whether the structure agrees with your expectations.

Second, it shows the effective weight of each indicator. Effective weights are the final weights of each indicator in the index, as a result of the indicator weights, the parent aggregate weights, and the structure of the index. This can reveal which indicators are implicitly weighted more than others, by e.g. having more or less indicators in the same aggregation groups. The effective weights can also be accessed directly using the `get_eff_weights()` function.

Finally, it can be a good way to communicate your index structure to other people.

The `plot_framework()` function has a few options for colouring. Other than that, if you don't like sunburst plots, another possibility is to set `type = "stack"`:

```{r}
plot_framework(coin, type = "stack", colour_level = 2)
```

This gives a linear representation of the index. Here we have also set the colouring level to the pillar level (see `plot_framework()` documentation).

# Statistical plots

Here we explore options for statistical plots, namely distribution and correlation plots.

## Distributions

The distribution of any variable, as well as groups of variables, in a coin can be visualised quickly using the `plot_dist()` function. The simplest case is to plot the distribution of a single indicator.

```{r}
plot_dist(coin, dset = "Raw", iCodes = "CO2")
```

To do this, as usual, we have to specify the data set (`dset`) and the indicator (`iCodes`) to plot. 



plot_dist

## Correlations

plot_corr

# Indicator plots

## Bar

plot_bar

## Dot

plot_dot

## Scatter

plot_scatter
